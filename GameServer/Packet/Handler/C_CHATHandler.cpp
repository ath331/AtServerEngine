////////////////////////////////////////////////////////////////////////////////////////////////////
// @breif C_CHATHandler class
////////////////////////////////////////////////////////////////////////////////////////////////////


#include "pch.h"
#include "C_CHATHandler.h"
#include "ClientPacketHandler.h"
#include "Logic/Room/Room.h"


////////////////////////////////////////////////////////////////////////////////////////////////////
// @breif HandlerRun
////////////////////////////////////////////////////////////////////////////////////////////////////
AtBool C_CHATHandler::Handle( PacketSessionRef& session, Protocol::C_CHAT& pkt )
{
	std::cout << pkt.msg() << endl;

	Protocol::S_CHAT chatPkt;
	chatPkt.set_msg( pkt.msg() );
	auto sendBuffer = ClientPacketHandler::MakeSendBuffer( chatPkt );

	GRoom->DoAsync( &Room::Broadcast, sendBuffer );

	return true;

	return true;
}